<html>

<head>
    <meta charset="UTF-8">

    <!-- The Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.3.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.3.0/firebase-database.js"></script>

    <!-- Jquery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <script src="init-database.js"></script>
</head>

<body>

    <div> <!-- Table that shows how many products, orders, and suppliers there are in realtime. -->
        <table>
            <td>Products: <span class="NumProducts">0</span></td>
            <td>|</td>
            <td>Orders: <span class="NumOrders">0</span></td>
            <td>|</td>
            <td>Suppliers: <span class="NumSuppliers">0</span></td>
        </table>
        <script>
            var num_products = 0;
            var num_Orders = 0;
            var num_Suppliers = 0;
            var updateNumProducts = amnt => $(".NumProducts").html(num_products = num_products + amnt);
            var updateNumOrders = amnt => $(".NumOrders").html(num_Orders = num_Orders + amnt);
            var updateNumSuppliers = amnt => $(".NumSuppliers").html(num_Suppliers = num_Suppliers + amnt);
            database.ref("Product").on("child_added", child => {
                updateNumProducts(1);
                updateNumOrders(1);
                updateNumSuppliers(1);
            });
            database.ref("Product").on("child_removed", child => {
                updateNumProducts(-1);
                updateNumOrders(-1);
                updateNumSuppliers(-1);
            });
        </script>
    </div>

    <form>
        <p>Add order</p>
        <label>Order id
            <input type="number" id="orderId">
        </label>
        <br>
        <label>Product
            <select id="addOrderProductId"></select>
            <script>
                database.ref("Product").on("child_added", data => {
                    $("#addOrderProductId").append(`<option value="${data.val().ProductId}"> ${data.val().ProductCode} </option>`);
                });
                database.ref("Product").on("child_removed", data => {
                    $(`#addOrderProductId > option[value=${data.val().ProductId}]`).remove();
                });
            </script>
        </label>
        <br>
        <label>Quantity
            <input type="number" id="quantity">
        </label>
        <br>
        <button id="addOrderBtn">Add</button>
    </form>

    <form>
        <p>Add product</p>
        <label>Product ID
            <input type="number" id="addProdId">
        </label>
        <br>
        <label>Product Code
            <input type="number" id="addProdCode">
        </label>
        <br>
        <label>Quantity
            <input type="number" id="addProdQuantity">
        </label>
        <br>
        <label>Price
            <input type="number" id="addProdPrice">
        </label>
        <br>
        <button id="addProductBtn">Add product</button>
    </form>

    <form>
        <p>Add suplier</p>
        <label>Supplier ID
            <input type="number" id="supplierId">
        </label>
        <br>
        <label>Name
            <input type="text" id="supplierName">
        </label>
        <br>
        <label>Phone
            <input type="number" id="supplierNumber">
        </label>
        <br>
        <button id="addSupplierBtn">Add supplier</button>
    </form>
    
    <form>
        <p>Add product supplier</p>
        <label>ProductId
            <input type="number" id="productSupplierProductId">
        </label>
        <br>
        <label>SupplierID
            <input type="number" id="productSupplierSupplierId">
        </label>
        <br>
        <button id="addProductSupplierBtn">Add Product Supplier</button>
    </form>

    <!-- Our main script is placed at the bottom of the document so that everything is loaded when it runs -->
    <script src="tempName.js"></script>
    <script src="function.js"></script>
</body>

</html>